# 🐋 1. 도커란 무엇인가?

## 💡 도커란 무엇인가?
**데이터 또는 프로그램을 격리시키는 기능**을 제공하는 소프트웨어

![alt text](./images/image.png)

### 🐬 컨테이너와 도커 엔진
개인용 컴퓨터 또는 서버 상의 환경을 마치 코스트코에서 판매하는 조립형 창고 같은 작은 방으로 분할하면? 그리고 이렇게 작게 쪼갠 독립된 창고에 데이터나 프로그램을 두는 것
- 이때 이 조립형 창고를 **컨테이너**
- 컨테이너를 다루는 기능을 제공하는 소프트웨어를 **도커**라고 한다.

![alt text](./images/image-1.png)

### 🐬 컨테이너를 만들려면 이미지가 필요
컨테이너를 만들려면 컨테이너의 빵셔틀과 같은 **이미지**가 필요
- 담고 있는 소프트웨어의 종류에 따라 다양한 이미지를 사용
- 컨테이너는 용량이 허락하는 한 하나의 도커에서 여러 개를 만들 수 있다.

![alt text](./images/image-2.png)


### 🐬 도커는 리눅스 컴퓨터에서 사용
도커는 몇가지 제약 사항이 있는데 
1. 종류와 상관없이 리눅스 운영체제가 필요
    - 윈도우나 macOS에서도 도커를 구동할 수는 있지만 이 경우 **내부적으로 리눅스가 사용된다.**
2. **컨테이너에서 동작시킬 프로그램도 리눅스용 프로그램**이다.

![alt text](./images/image-3.png)

### 🐬데이터나 프로그램을 독립된 환경에 격리해야 하는 이유
대부분의 프로그램은 프로그램 단독으로 동작하는 것이 아니라 어떤 실행 환경이나 라이브러리, 다른 프로그램을 이용해 동작한다. 
- ex) PHP 프로그램 - PHP 실행환경

소프트웨어 역시 단일 프로그램이 아니라 여러 개의 프로그램으로 구성된 경우가 많다. 예를 들어, 워드프레스(WordPress)는 MySQL 데이터베이스를 따로 갖추지 않으면 사용할 수 없다.
또한 다른 프로그램과 특정한 폴더 또는 디렉터리를 공유하거나 같은 경로에 설정 정보를 저장하는 경우도 있음

![alt text](./images/image-4.png)

이 때문에 프로그램 하나를 업데이트 하면 다른 프로그램에도 영향을 미친다.
공유하는 대상을 어느 한쪽만을 위해 수정하면 다른 쪽에서 오류가 발생한다.

![alt text](./images/image-5.png)

이런 문제는 업데이트할 때만 발생하는 것이 아니다. 서버에서는 여러 프로그램이 함께 동작하므로 서버를 처음 구축할 때부터 신중하게 따져보지 않으면 안된다. 설계할 때는 문제가 없었던 프로그램끼리도 실제로 설치해보면 오류를 일으키는 경우가 있다. 
이러한 문제의 원인은 대부분 **프로그램 간 공유**에 있다.

프로그램에 따라서는 한 서버에 한 버전 밖에 설치할 수 없으므로 최소 버전을 같이 맞춰놓으면 문제가 되지 않는다.
그러나 신규 개발이라면 모를까, 기존 프로그램을 함께 설치하려는 상황이라면 연동 프로그램의 버전을 맞추지 못할 수도 있다.
디렉터리 역시 시스템 A, B가 같은 디렉터리를 사용하게 돼 있어서 설정 파일이 섞이거나 설정이 충돌이 발생할 수도 있다.

### 🐬 프로그램 격기란?
컨테이너 안에 들어있는 프로그램은 다른 프로그램과 격리된 상태이다.
도커 컨테이너를 사용해 프로그램을 격리하면 여러 프로그램이 한 서버에서 실행되면서 발생하는 문제를 대부분 해결할 수 있다.

![alt text](./images/image-6.png)

## 💡서버와 도커

### 🐬 서버의 두 가지 의미
도커는 서버에서 사용되는 소프트웨어이다.<br> 
클라이언트 컴퓨터에서도 사용할 수는 있지만 현시점에서는 서버에서 사용하는 것이 주 목적이라고 생각해도 좋다. 그렇다면 서버란?

🚨 **서버** : **어떤 서비스(service)를 제공(serve)하는 것**


### 🐬 기능적 의미의 서버와 물지적 컴퓨터로서의 서버
개발 현장에서 **서버**는 두 가지 의미를 갖는다. 한 가지는 **기능적 의미의 서버**이고 다른 한 가지는 **물리적 컴퓨터로서의 서버**를 가리킨다.
![alt text](./images/image-7.png)

흔히 말하는 "웹 서버에 올려줘", "메일 서버가 죽었어" 등은 기능적 의미의 서버를 가르킨다.<br>
**'무슨무슨 서버'라는 말은 '무슨무슨 기능을 제공한다.'라는 의미**이므로 '웹 기능을 제공하는 서버'는 웹 서버이고 '메일 기능을 제공하는 서버'는 메일 서버가 됨

![alt text](./images/image-8.png)

이와 달리 물리적 컴퓨터로서의 서버는 "신입 직원이 올 테니 책상 위의 서버 좀 취워라", "저번에 사장님이 서버에 꽃혀 있던 랜 케이블을 뽑았어" 같은 상황에서 가리키는 의미 즉, **실물**을 말한다. <br>
**데스크톱 컴퓨터와 마찬가지로 어딘가에 물리적으로 존재하는 컴퓨터**다.

![alt text](./images/image-9.png)

이렇게 의미를 구분하는 이유? 

⚓ **하나의 '물리적 컴퓨터로서의 서버'에 여러 개의 '기능적 의미의 서버'를 함꼐 둘 수 있기 때문!!!**
<br>
일반적인 개인용 컴퓨터는 개인이 사용하지만 서버는 여러 사람이 원격으로 접근해서 사용한다는 점이 다르다.
물론 이러한 차이로 컴퓨터의 사양이나 요구사항이 달라짐 <br>
하지만 우리가 쓰는 개인용 컴퓨터와 마찬가지로 운영체제가 동작하고 그 위에 소프트웨어를 실행하는 것은 동일


![alt text](./images/image-10.png)

### 🐬 서버의 기능은 소프트웨어가 제공한다
따라서 서버의 기능 역시 특별한 것이 없다. <br>
**서버의 기능은 소프트웨어가 제공하는 것**으로 소프트웨어를 설치하면 **서버**의 기능을 갖게 된다.

![alt text](./images/image-11.png)

그리고 서버의 기능이 소프트웨어에서 나온다는 말은 **여러 가지 소프트웨어를 한 컴퓨터에 설치할 수 있다**는 말이다. <br>
구체적으로 설명하면 웹 서버와 메일 서버, FTP 서버를 한 컴퓨터에서 제공하는 경우를 흔히 볼 수 있고 시스템 서버와 데이터베이스 서버가 함께 동작하기도 한다.<br>
그러므로 여러 기능적 의미의 서버가 하나의 물리적 컴퓨터와 함께 존재할 수 있는 것 

### 🐬서버의 대표적인 예
하나의 물리적 컴퓨터에 여러 기능적 의미의 서버를 함께 동작시키는 것이 도커의 장점과 관계가 있다.

#### 기능적 의미의 서버에 대표적인 예
![alt text](./images/image-12.png)

### 🐬서버의 운영체제로는 주로 리눅스가 사용된다.
우리가 사용하는 개인용 컴퓨터와 서버는 크게 다르지 않다.<br>
서버는 사용 목적에 따라 발열에 견디도록 구성하거나, 그래픽 기능을 사용할 일이 적기 때문에 서버 전용으로 특화되는 경향이 있지만 물리적 컴퓨터가 존재하고 그 위에 운영체제가 동작하며 소프트웨어를 설치한다는 점에서 개인용 컴퓨터와 같다. 다른 것은 **역할**뿐

다만 서버의 역할 특성상 운영체제는 서버용 운영체제를 사용하는 경우가 많음<br>
서버용 운영체제로는 **리눅스** 또는 **유닉스** 계열을 주로 사용하며, 서버용 소프트웨어도 리늑스용 소프트웨어가 대다수를 차지 <br>
윈도우도 서버용 버전에 따로 있지만 점유율 면에서는 리눅스와 유닉스가 높다. 

리눅스와 유닉스도 여러 종류가 있다. 리눅스 계통에서는 레드햇, CentOS, 우분투 등이 유명하다.

![alt text](./images/image-13.png)

### 🐬 컨테이너를 이용해 여러 가지 서버 기능을 안전하게 함께 실행
앞서 말했듯 도커 환경에서는 컨테이너를 사용해 프로그램을 완전히 격리시킬 수 있음<br>
그렇다면 예산이 부족한 한 대의 서버에서 실행하던 웹 서버와 메일 서버, 시스템과 DB 서버를 각각 독립적인 환경에서 안전하게 운용할 수 있고 무엇을 업데이트하더라도 서로 영향을 미지치 않을 것이다. <br>
또 일반적으로 한 대의 서버 컴퓨터에는 웹 서버를 한 벌(아파치 한 벌)밖에 실행하지 못한다. 그러나 컨테이너 기술을 활용하면 여러 개의 웹 서버를 올릴 수 있다. 

![alt text](./images/image-14.png)

또 물리 서버 한 대에 여러 개의 웹 서버를 띄우면 그만큼 물리 서버 수를 줄일 수 있고 개발자 측면에서 개발 환경을 갖추거나 운영환경으로 쉽게 넘어갈 수 있다는 이점을 제공한다. <br>
이러한 이점은 컨테이너가 그저 격리된 환경이 아니라 **쉽게 옮길 수 있다**는 특성에서 비롯된다. 



### 🐬자유로이 옮길 수 있는 컨테이너
컨테이너는 자유롭게 옮길 수 있다. <br>
실제로는 컨테이너 자체를 옮긴다기보다는 **컨테이너의 정보를 내보내기 -> 다른 도커 엔진에서 복원하는 형태**
이런 특성을 이용하면 똑같은 상태로 튜닝한 컨테어너를 팀원 전원에게 배포해 모두가 동일한 개발환경을 사용할 수 있다.
도커를 이용하면 **물리적 환경의 차이, 서버 구성의 차이를 무시**할 수 있으므로 운영 서버와 개발 서버의 환경 차이로 인해 문제를 원칙적으로 방지할 수 있음

![alt text](./images/image-15.png)


![alt text](./images/image-16.png)



